(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{232:e=>{e.exports={resultsPanel:"inspector_resultsPanel__emvNe",resultsPanelHeader:"inspector_resultsPanelHeader__VWREt",resultsPanelTitle:"inspector_resultsPanelTitle__TKycE",resultsPanelClose:"inspector_resultsPanelClose___fsCY",resultsPanelContent:"inspector_resultsPanelContent__Es8K1",resultsPanelEmpty:"inspector_resultsPanelEmpty__YL_pp",resultsPanelEmptyIcon:"inspector_resultsPanelEmptyIcon__f3yyj",resultsPanelEmptyText:"inspector_resultsPanelEmptyText__rQEjQ",componentInfo:"inspector_componentInfo__5KmN4",componentName:"inspector_componentName__Fq5CG",componentSource:"inspector_componentSource__d8Z4S",componentSourceLabel:"inspector_componentSourceLabel__7U1XJ",componentSourcePath:"inspector_componentSourcePath__ZS_8H",componentSourceLine:"inspector_componentSourceLine__reJac",componentProps:"inspector_componentProps__VdjJy",componentPropsLabel:"inspector_componentPropsLabel__V7Oui",componentPropsCode:"inspector_componentPropsCode__GXVmg",recordingOverlay:"inspector_recordingOverlay__zLqhG",recordingOverlayActive:"inspector_recordingOverlayActive__alqI1",recordingBorder:"inspector_recordingBorder__HdGD4",recordingIndicator:"inspector_recordingIndicator__Ro4oa",recordingDot:"inspector_recordingDot__h1FSu",blink:"inspector_blink__7Mdv1",recordingText:"inspector_recordingText__wJkuH",recordingTime:"inspector_recordingTime___RO0l",observationFeed:"inspector_observationFeed__pRiMi",observationFeedHeader:"inspector_observationFeedHeader__KsAZX",observationFeedTitle:"inspector_observationFeedTitle__q_kFJ",observationFeedCount:"inspector_observationFeedCount__DOYDa",observationFeedContent:"inspector_observationFeedContent__FSG_1",observationItem:"inspector_observationItem__EfewJ",fadeIn:"inspector_fadeIn__iEtLl",observationItemTime:"inspector_observationItemTime__y1zXe",observationItemText:"inspector_observationItemText__50eb1",observationEmpty:"inspector_observationEmpty__lXqn9",observationEmptyIcon:"inspector_observationEmptyIcon__3ggFD",observationEmptyText:"inspector_observationEmptyText__R8XDp",chatDrawer:"inspector_chatDrawer__3bSGu",chatDrawerHeader:"inspector_chatDrawerHeader__vEXz9",chatDrawerTitle:"inspector_chatDrawerTitle__CJuif",chatDrawerIcon:"inspector_chatDrawerIcon__c2ho4",chatDrawerControls:"inspector_chatDrawerControls__Wp7mh",chatDrawerControl:"inspector_chatDrawerControl__Uq3tN",chatDrawerMessages:"inspector_chatDrawerMessages__7Eb4c",chatDrawerEmpty:"inspector_chatDrawerEmpty__qIR3K",chatDrawerEmptyIcon:"inspector_chatDrawerEmptyIcon__P8fR4",pulse:"inspector_pulse__t4AQn",chatDrawerEmptyText:"inspector_chatDrawerEmptyText__HXqxe",chatDrawerFooter:"inspector_chatDrawerFooter__0sUgS",chatDrawerButton:"inspector_chatDrawerButton__W_fw4",chatDrawerButtonWarm:"inspector_chatDrawerButtonWarm__3hOic",chatDrawerButtonActive:"inspector_chatDrawerButtonActive__48H0A",chatDrawerButtonCool:"inspector_chatDrawerButtonCool__2i5w8",chatDrawerButtonRecording:"inspector_chatDrawerButtonRecording__09S9F",recordPulse:"inspector_recordPulse__LqJbU",chatMessage:"inspector_chatMessage__Pdv8j",messageAppear:"inspector_messageAppear__cgN_O",chatMessageElement:"inspector_chatMessageElement__md8o_",chatMessageObservation:"inspector_chatMessageObservation__Qcy8z",chatMessageSystem:"inspector_chatMessageSystem__4lMXT",chatMessageError:"inspector_chatMessageError__q0YRp",chatMessageRecording:"inspector_chatMessageRecording__MlHJ6",recordingMessage:"inspector_recordingMessage__UeYSV",chatMessageHeader:"inspector_chatMessageHeader__5tKPA",chatMessageIcon:"inspector_chatMessageIcon__arvg8",chatMessageLabel:"inspector_chatMessageLabel__nWGiV",chatMessageTime:"inspector_chatMessageTime__rwxto",chatMessageToggle:"inspector_chatMessageToggle__Oc81w",chatMessageContent:"inspector_chatMessageContent__u_ouQ",chatMessageText:"inspector_chatMessageText__0JIbj",chatMessageTag:"inspector_chatMessageTag__HZGxD",chatMessageTagProps:"inspector_chatMessageTagProps__8QWeR",chatMessageDetails:"inspector_chatMessageDetails__PBAYw",chatMessageField:"inspector_chatMessageField___1Y1_",chatMessageFieldLabel:"inspector_chatMessageFieldLabel__7BX8Y",chatMessageFieldValue:"inspector_chatMessageFieldValue__qsyIA",chatMessageSourceLine:"inspector_chatMessageSourceLine__8dSpe",chatMessageCode:"inspector_chatMessageCode__0FmMs",chatMessageActions:"inspector_chatMessageActions__gx43_",chatMessageAction:"inspector_chatMessageAction__sQGJ7",chatMessageActionPrimary:"inspector_chatMessageActionPrimary__OCXWm",chatError:"inspector_chatError__9thTj",chatErrorIcon:"inspector_chatErrorIcon__nmNm4",chatErrorContent:"inspector_chatErrorContent__Zfrnj",chatErrorTitle:"inspector_chatErrorTitle__IUJy5",chatErrorMessage:"inspector_chatErrorMessage__GxxTu",chatErrorRetry:"inspector_chatErrorRetry__ea5sT"}},672:e=>{e.exports={urlInput:"external_urlInput__kqami",urlInputRow:"external_urlInputRow__AhfFJ",urlInputField:"external_urlInputField__PHECQ",urlInputButton:"external_urlInputButton__k106y",urlHistory:"external_urlHistory__gb8JR",urlHistoryLabel:"external_urlHistoryLabel__Q0AgA",urlHistoryItem:"external_urlHistoryItem__q5h3e",iframeContainer:"external_iframeContainer__xOvRW",iframe:"external_iframe__9lQ00",iframePlaceholder:"external_iframePlaceholder__YVEZ6",iframePlaceholderIcon:"external_iframePlaceholderIcon__Z7H1u",iframePlaceholderTitle:"external_iframePlaceholderTitle__XRnF3",iframePlaceholderText:"external_iframePlaceholderText__7_kbk",iframeLoading:"external_iframeLoading__SHJnq",iframeLoadingSpinner:"external_iframeLoadingSpinner__ZyznD",spin:"external_spin__xsupn",iframeLoadingText:"external_iframeLoadingText__p9dyO",connectionStatus:"external_connectionStatus__BfCtp",connectionStatusDot:"external_connectionStatusDot__mH5Dp",connectionStatusDotLoading:"external_connectionStatusDotLoading__P7re9",pulse:"external_pulse__moMPQ",connectionStatusDotWaiting:"external_connectionStatusDotWaiting__PwZJl",connectionStatusDotConnected:"external_connectionStatusDotConnected__HCUWx",connectionStatusDotNotInstalled:"external_connectionStatusDotNotInstalled__hYKkk",externalLayout:"external_externalLayout__UzG1E",externalMain:"external_externalMain__JhZI5",externalSidebar:"external_externalSidebar__IAuo8",sidebarPanel:"external_sidebarPanel__5ZwOn",sidebarHeader:"external_sidebarHeader__5dsJv",sidebarTitle:"external_sidebarTitle__3henn",sidebarContent:"external_sidebarContent__0RDlX",sidebarEmpty:"external_sidebarEmpty__kVbrC",sidebarEmptyIcon:"external_sidebarEmptyIcon__5OMZs",sidebarEmptyText:"external_sidebarEmptyText__A2_Ky"}},706:e=>{e.exports={header:"layout_header__gx0gn",headerLogo:"layout_headerLogo__ZMT4G",headerLogoIcon:"layout_headerLogoIcon__kdZSy",headerLogoText:"layout_headerLogoText__MFk4G",headerNav:"layout_headerNav__KOzea",headerNavLink:"layout_headerNavLink__jl2C1",headerNavLinkActive:"layout_headerNavLinkActive__FFRcN",headerStatus:"layout_headerStatus__JXP_1",main:"layout_main__LiD42",mainContent:"layout_mainContent__5IEca",pageTitle:"layout_pageTitle__XYK1Y",pageSubtitle:"layout_pageSubtitle___Y6tm",embedContainer:"layout_embedContainer__J6KXA",embedContent:"layout_embedContent__8qtj2",embedTitle:"layout_embedTitle__rt_H4",embedSubtitle:"layout_embedSubtitle__w_RvR",previewContainer:"layout_previewContainer__fzUIM",previewIframe:"layout_previewIframe__Gdhk2",previewToolbar:"layout_previewToolbar__iQN1w",previewUrl:"layout_previewUrl__1IkU1",previewStatus:"layout_previewStatus__vAu8b",previewStatusDot:"layout_previewStatusDot__kFA3U",previewStatusDotConnected:"layout_previewStatusDotConnected__LtlSN",previewStatusDotWaiting:"layout_previewStatusDotWaiting__ruNxc",statusPulse:"layout_statusPulse__twyk9"}},3756:e=>{e.exports={panel:"glass_panel___AbWS",panelShimmer:"glass_panelShimmer__S17in",shimmer:"glass_shimmer__WoQz8",button:"glass_button__1MhNz",buttonWarm:"glass_buttonWarm__uw6_I",buttonCool:"glass_buttonCool__2_mWh",buttonRecording:"glass_buttonRecording__lR9ix","pulse-recording":"glass_pulse-recording__vMCWl",buttonSm:"glass_buttonSm__n9HdH",buttonLg:"glass_buttonLg__lfjia",buttonIcon:"glass_buttonIcon__iZOJw",buttonIconSm:"glass_buttonIconSm__wpAxW",buttonIconLg:"glass_buttonIconLg__5WG1N",input:"glass_input__pCwBc",inputError:"glass_inputError__AV_Ye",inputWrapper:"glass_inputWrapper__2Ce3N",inputIcon:"glass_inputIcon__Co3Hx",inputWithIcon:"glass_inputWithIcon__Wla5e",badge:"glass_badge__0qTnm",badgeDot:"glass_badgeDot__CzTqx",badgeSuccess:"glass_badgeSuccess__6PnU1",badgeWarning:"glass_badgeWarning__xPCyY",badgeError:"glass_badgeError__OPbXF",badgeRecording:"glass_badgeRecording__oPLzF",blink:"glass_blink__cT_uE",badgeCool:"glass_badgeCool__pJEXQ",badgeWarm:"glass_badgeWarm__mg7Kb"}},8566:(e,t,a)=>{Promise.resolve().then(a.bind(a,8586))},8586:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>R});var r=a(2187),n=a(2299),s=a(191),o=a.n(s),c=a(2576),i=a(3756),l=a.n(i);function d(e){let{className:t,variant:a="default",dot:n=!1,children:s,...o}=e,c={default:"",success:l().badgeSuccess,warning:l().badgeWarning,error:l().badgeError,recording:l().badgeRecording,cool:l().badgeCool,warm:l().badgeWarm},i=[l().badge,c[a],t].filter(Boolean).join(" ");return(0,r.jsxs)("span",{className:i,...o,children:[n&&(0,r.jsx)("span",{className:l().badgeDot}),s]})}(0,n.forwardRef)((e,t)=>{let{className:a,glow:n="none",shimmer:s=!1,children:o,...c}=e,i=[l().panel,s&&l().panelShimmer,a].filter(Boolean).join(" ");return(0,r.jsx)("div",{ref:t,className:i,"data-glow":"none"!==n?n:void 0,...c,children:o})}).displayName="Panel",(0,n.forwardRef)((e,t)=>{let{className:a,variant:n="default",size:s="md",iconOnly:o=!1,children:c,...i}=e,d={default:"",warm:l().buttonWarm,cool:l().buttonCool,recording:l().buttonRecording},_={sm:o?l().buttonIconSm:l().buttonSm,md:o?l().buttonIcon:"",lg:o?l().buttonIconLg:l().buttonLg},u=[l().button,d[n],_[s],a].filter(Boolean).join(" ");return(0,r.jsx)("button",{ref:t,className:u,...i,children:c})}).displayName="Button",(0,n.forwardRef)((e,t)=>{let{className:a,error:n=!1,icon:s,...o}=e,c=[l().input,n&&l().inputError,s&&l().inputWithIcon,a].filter(Boolean).join(" ");return s?(0,r.jsxs)("div",{className:l().inputWrapper,children:[(0,r.jsx)("span",{className:l().inputIcon,children:s}),(0,r.jsx)("input",{ref:t,className:c,...o})]}):(0,r.jsx)("input",{ref:t,className:c,...o})}).displayName="Input";var _=a(706),u=a.n(_);function p(e){let{webGpuAvailable:t=!1}=e,a=(0,c.usePathname)();return(0,r.jsxs)("header",{className:"".concat(u().header," animate-emerge"),children:[(0,r.jsxs)("div",{className:u().headerLogo,children:[(0,r.jsx)("div",{className:u().headerLogoIcon,children:(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M12 3l9 4.5v9L12 21l-9-4.5v-9L12 3z"}),(0,r.jsx)("path",{d:"M12 12l9-4.5"}),(0,r.jsx)("path",{d:"M12 12v9"}),(0,r.jsx)("path",{d:"M12 12L3 7.5"})]})}),(0,r.jsx)("span",{className:u().headerLogoText,children:"Forge Inspector"})]}),(0,r.jsx)("nav",{className:u().headerNav,children:(0,r.jsx)(o(),{href:"/",className:"".concat(u().headerNavLink," ").concat("/"===a?u().headerNavLinkActive:""),children:"Playground"})}),(0,r.jsx)("div",{className:u().headerStatus,children:(0,r.jsx)(d,{variant:t?"success":"warning",dot:!0,children:t?"WebGPU Ready":"WebGPU Unavailable"})})]})}var h=a(8526),g=a(6345),m=a(232),x=a.n(m);let b={MAX_DEPTH:5,MAX_STRING_LENGTH:500},v={system:"◎",element:"◉",observation:"◇",error:"⚠",recording:"●"},y={system:"SYSTEM",element:"ELEMENT",observation:"OBSERVATION",error:"ERROR",recording:"RECORDING"};function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.MAX_DEPTH,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b.MAX_STRING_LENGTH,r=new WeakSet;try{let n=function e(n,s){if(null==n||"boolean"==typeof n||"number"==typeof n)return n;if("string"==typeof n)return n.length>a?n.slice(0,a)+"...[truncated]":n;if("function"==typeof n)return"[Function]";if(s>t)return"[Max depth exceeded]";if("object"==typeof n){if(r.has(n))return"[Circular]";if(r.add(n),Array.isArray(n))return n.map(t=>e(t,s+1));let t={};for(let a of Object.keys(n))try{t[a]=e(n[a],s+1)}catch(e){t[a]="[Error: ".concat(e instanceof Error?e.message:"unknown","]")}return t}return String(n)}(e,0);return JSON.stringify(n,null,2)}catch(t){return console.warn("[ChatMessage] safeStringify failed:",t),"[Object: ".concat(typeof e,"]")}}function j(e){var t;let{message:a,onCopy:s,onOpenEditor:o}=e,[c,i]=(0,n.useState)(!0),l="element"===a.type,d=l&&"object"==typeof(t=a.content)&&null!==t&&"tag"in t&&"string"==typeof t.tag?a.content:null,_="".concat(x().chatMessage," ").concat(x()["chatMessage".concat(a.type.charAt(0).toUpperCase()+a.type.slice(1))]);return(0,r.jsxs)("div",{className:_,children:[(0,r.jsxs)("div",{className:x().chatMessageHeader,children:[(0,r.jsx)("span",{className:x().chatMessageIcon,children:v[a.type]}),(0,r.jsx)("span",{className:x().chatMessageLabel,children:y[a.type]}),(0,r.jsx)("span",{className:x().chatMessageTime,children:new Date(a.timestamp).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}),l&&(0,r.jsx)("button",{className:x().chatMessageToggle,onClick:()=>i(!c),"aria-label":c?"Collapse":"Expand",children:c?"−":"+"})]}),(0,r.jsx)("div",{className:x().chatMessageContent,children:"string"==typeof a.content?(0,r.jsx)("p",{className:x().chatMessageText,children:a.content}):d&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:x().chatMessageElement,children:(0,r.jsxs)("code",{className:x().chatMessageTag,children:["<",d.componentName||d.tag,d.props&&Object.keys(d.props).length>0&&(0,r.jsxs)("span",{className:x().chatMessageTagProps,children:[" ",Object.entries(d.props).slice(0,2).map(e=>{let[t,a]=e;return"".concat(t,'="').concat(String(a),'"')}).join(" "),Object.keys(d.props).length>2&&" ..."]}),">"]})}),c&&(0,r.jsxs)("div",{className:x().chatMessageDetails,children:[d.componentName&&(0,r.jsxs)("div",{className:x().chatMessageField,children:[(0,r.jsx)("span",{className:x().chatMessageFieldLabel,children:"Component"}),(0,r.jsx)("span",{className:x().chatMessageFieldValue,children:d.componentName})]}),d.source&&(0,r.jsxs)("div",{className:x().chatMessageField,children:[(0,r.jsx)("span",{className:x().chatMessageFieldLabel,children:"Source"}),(0,r.jsxs)("span",{className:x().chatMessageFieldValue,children:[d.source.fileName.split("/").pop(),(0,r.jsxs)("span",{className:x().chatMessageSourceLine,children:[":",d.source.lineNumber,d.source.columnNumber&&":".concat(d.source.columnNumber)]})]})]}),d.props&&Object.keys(d.props).length>0&&(0,r.jsxs)("div",{className:x().chatMessageField,children:[(0,r.jsx)("span",{className:x().chatMessageFieldLabel,children:"Props"}),(0,r.jsx)("pre",{className:x().chatMessageCode,children:f(d.props)})]}),(0,r.jsxs)("div",{className:x().chatMessageActions,children:[s&&(0,r.jsx)("button",{className:x().chatMessageAction,onClick:()=>s(f(d)),children:"Copy"}),o&&d.source&&(0,r.jsx)("button",{className:"".concat(x().chatMessageAction," ").concat(x().chatMessageActionPrimary),onClick:()=>o(d.source),children:"Open in Editor"})]})]})]})})]})}function w(e){let{messages:t,isOpen:a,isSelecting:s,isRecording:o,webGpuAvailable:c,onToggleSelection:i,onToggleRecording:l,onClose:d,onCopyMessage:_,onOpenEditor:u}=e,p=(0,n.useRef)(null);return(0,n.useEffect)(()=>{p.current&&p.current.scrollIntoView({behavior:"smooth"})},[t]),(0,r.jsx)(h.N,{children:a&&(0,r.jsxs)(g.P.div,{className:x().chatDrawer,initial:{x:"100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:300},children:[(0,r.jsxs)("div",{className:x().chatDrawerHeader,children:[(0,r.jsxs)("div",{className:x().chatDrawerTitle,children:[(0,r.jsx)("span",{className:x().chatDrawerIcon,children:"◉"}),(0,r.jsx)("span",{children:"CONSOLE"})]}),(0,r.jsx)("div",{className:x().chatDrawerControls,children:(0,r.jsx)("button",{className:x().chatDrawerControl,onClick:d,"aria-label":"Close drawer",children:(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:(0,r.jsx)("path",{d:"M1 1L13 13M1 13L13 1",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})})})]}),(0,r.jsx)("div",{className:x().chatDrawerMessages,children:0===t.length?(0,r.jsxs)("div",{className:x().chatDrawerEmpty,children:[(0,r.jsx)("div",{className:x().chatDrawerEmptyIcon,children:(0,r.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",children:[(0,r.jsx)("circle",{cx:"24",cy:"24",r:"20",stroke:"currentColor",strokeWidth:"1.5",strokeDasharray:"4 4"}),(0,r.jsx)("circle",{cx:"24",cy:"24",r:"8",stroke:"currentColor",strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M24 4V12M24 36V44M4 24H12M36 24H44",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}),(0,r.jsx)("p",{className:x().chatDrawerEmptyText,children:'Click "Pick Element" to select a component'})]}):(0,r.jsxs)(r.Fragment,{children:[t.map(e=>(0,r.jsx)(j,{message:e,onCopy:_,onOpenEditor:u},e.id)),(0,r.jsx)("div",{ref:p})]})}),(0,r.jsxs)("div",{className:x().chatDrawerFooter,children:[(0,r.jsx)("button",{className:"".concat(x().chatDrawerButton," ").concat(x().chatDrawerButtonWarm," ").concat(s?x().chatDrawerButtonActive:""),onClick:i,children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,r.jsx)("path",{d:"M4 4L12 12M4 12L12 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})}),(0,r.jsx)("span",{children:"Cancel"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,r.jsx)("circle",{cx:"8",cy:"8",r:"3",stroke:"currentColor",strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M8 1V4M8 12V15M1 8H4M12 8H15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}),(0,r.jsx)("span",{children:"Pick Element"})]})}),(0,r.jsx)("button",{className:"".concat(x().chatDrawerButton," ").concat(x().chatDrawerButtonCool," ").concat(o?x().chatDrawerButtonRecording:""),onClick:l,disabled:!c&&!o,title:c?void 0:"WebGPU required for recording",children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,r.jsx)("rect",{x:"4",y:"4",width:"8",height:"8",rx:"1",fill:"currentColor"})}),(0,r.jsx)("span",{children:"Stop"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,r.jsx)("circle",{cx:"8",cy:"8",r:"4",fill:"currentColor"})}),(0,r.jsx)("span",{children:"Record"})]})})]})]})})}class N extends n.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){var a,r;console.error("[ChatErrorBoundary] Error caught:",e,t),null==(a=(r=this.props).onError)||a.call(r,e,t)}render(){if(this.state.hasError){var e;return(0,r.jsxs)("div",{className:x().chatError,children:[(0,r.jsx)("div",{className:x().chatErrorIcon,children:"!"}),(0,r.jsxs)("div",{className:x().chatErrorContent,children:[(0,r.jsx)("p",{className:x().chatErrorTitle,children:"Something went wrong"}),(0,r.jsx)("p",{className:x().chatErrorMessage,children:(null==(e=this.state.error)?void 0:e.message)||"An unexpected error occurred"})]}),(0,r.jsx)("button",{className:x().chatErrorRetry,onClick:this.handleRetry,children:"Retry"})]})}return this.props.children}constructor(e){super(e),this.handleRetry=()=>{this.setState({hasError:!1,error:null})},this.state={hasError:!1,error:null}}}function M(e){let{isRecording:t}=e,[a,s]=(0,n.useState)(0);return(0,n.useEffect)(()=>{if(!t)return void s(0);let e=setInterval(()=>{s(e=>e+1)},1e3);return()=>clearInterval(e)},[t]),(0,r.jsx)(h.N,{children:t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.P.div,{className:"".concat(x().recordingOverlay," ").concat(x().recordingOverlayActive),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3}}),(0,r.jsxs)(g.P.div,{className:x().recordingIndicator,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,ease:[.16,1,.3,1]},children:[(0,r.jsx)("span",{className:x().recordingDot}),(0,r.jsx)("span",{className:x().recordingText,children:"Recording"}),(0,r.jsx)("span",{className:x().recordingTime,children:function(e){let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))}(a)})]})]})})}var C=a(672),S=a.n(C);let E="forge-inspector-url-history";function D(e){let{onLoad:t,isLoading:a=!1}=e,[s,o]=(0,n.useState)(""),[c,i]=(0,n.useState)([]);return(0,n.useEffect)(()=>{try{let e=localStorage.getItem(E);e&&i(JSON.parse(e))}catch(e){console.warn("Failed to load URL history from localStorage:",e)}},[]),(0,r.jsxs)("div",{className:"".concat(S().urlInput," animate-emerge delay-1"),children:[(0,r.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!s.trim())return;let a=s.trim();a.startsWith("http://")||a.startsWith("https://")||(a="https://".concat(a));let r=[a,...c.filter(e=>e!==a)].slice(0,5);i(r);try{localStorage.setItem(E,JSON.stringify(r))}catch(e){console.warn("Failed to save URL history to localStorage:",e)}t(a)},className:S().urlInputRow,children:[(0,r.jsx)("input",{type:"text",className:S().urlInputField,placeholder:"Enter URL (e.g., localhost:3000)",value:s,onChange:e=>o(e.target.value),disabled:a}),(0,r.jsx)("button",{type:"submit",className:S().urlInputButton,disabled:!s.trim()||a,children:a?"Loading...":"Load"})]}),c.length>0&&(0,r.jsxs)("div",{className:S().urlHistory,children:[(0,r.jsx)("span",{className:S().urlHistoryLabel,children:"Recent:"}),c.map(e=>(0,r.jsx)("button",{className:S().urlHistoryItem,onClick:()=>{o(e),t(e)},disabled:a,children:e.replace(/^https?:\/\//,"")},e))]})]})}let I=(0,n.forwardRef)(function(e,t){let{url:a,onLoad:n}=e;return a?(0,r.jsx)("div",{className:"".concat(S().iframeContainer," animate-emerge delay-2"),children:(0,r.jsx)("iframe",{ref:t,src:a,className:S().iframe,onLoad:n,title:"Forge Inspector Target",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups"})}):(0,r.jsx)("div",{className:"".concat(S().iframeContainer," animate-emerge delay-2"),children:(0,r.jsxs)("div",{className:S().iframePlaceholder,children:[(0,r.jsxs)("svg",{className:S().iframePlaceholderIcon,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),(0,r.jsx)("path",{d:"M3 9h18"}),(0,r.jsx)("path",{d:"M9 21V9"})]}),(0,r.jsx)("h3",{className:S().iframePlaceholderTitle,children:"No URL Loaded"}),(0,r.jsx)("p",{className:S().iframePlaceholderText,children:'Enter a URL above to load an external page with forge-inspector installed, or click "Test Sample Components" to try the built-in demo.'})]})})}),k={idle:"Enter a URL to start",loading:"Loading page...",waiting:"Detecting ForgeInspector...",connected:"Connected","not-installed":"ForgeInspector not detected"},L={idle:"",loading:S().connectionStatusDotLoading,waiting:S().connectionStatusDotWaiting,connected:S().connectionStatusDotConnected,"not-installed":S().connectionStatusDotNotInstalled};function T(e){let{state:t}=e;return"idle"===t?null:(0,r.jsxs)("div",{className:S().connectionStatus,children:[(0,r.jsx)("span",{className:"".concat(S().connectionStatusDot," ").concat(L[t])}),(0,r.jsx)("span",{children:k[t]})]})}let P="click-to-component";function R(){let e=(0,n.useRef)(null),t=(0,n.useRef)(null),a=(0,n.useRef)([]),s=(0,n.useRef)(!0),[o,c]=(0,n.useState)(null),[i,l]=(0,n.useState)(!1),[d,_]=(0,n.useState)("idle"),[h,g]=(0,n.useState)(!1),[m,x]=(0,n.useState)(!1),[b,v]=(0,n.useState)(!0),[y,f]=(0,n.useState)([]),j=(0,n.useCallback)((e,t)=>{if(!s.current)return;let a={id:"msg-".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,7)),type:e,timestamp:Date.now(),content:t};f(e=>[...e,a])},[]),C=(0,n.useCallback)(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),E=(0,n.useCallback)(()=>{a.current.forEach(clearTimeout),a.current=[]},[]);(0,n.useEffect)(()=>{(async()=>{try{if("gpu"in navigator){let e=await navigator.gpu.requestAdapter();l(!!e)}}catch(e){console.info("[Playground] WebGPU not available:",e),l(!1)}})()},[]),(0,n.useEffect)(()=>{let t=t=>{var a,r,n,s,o;if((null==(a=t.data)?void 0:a.source)===P){if((null==(r=e.current)?void 0:r.contentWindow)&&t.source!==e.current.contentWindow)return void console.warn("[Playground] Rejected message from unexpected source");switch(console.log("[Playground] Received message:",t.data.type),t.data.type){case"ready":console.log("[Playground] ForgeInspector ready, sending enable-button"),C(),_("connected"),t.source&&t.origin&&t.source.postMessage({source:P,version:1,type:"enable-button"},t.origin),j("system","Connected to ForgeInspector. Ready for element selection.");break;case"open-in-editor":if(null==(n=t.data.payload)?void 0:n.selected){let{selected:e,clickedElement:a}=t.data.payload;j("element",{tag:(null==a?void 0:a.tag)||"unknown",componentName:e.name||void 0,source:(null==(s=e.source)?void 0:s.fileName)?{fileName:e.source.fileName,lineNumber:e.source.lineNumber,columnNumber:e.source.columnNumber}:void 0,props:e.props||void 0}),g(!1)}break;case"recording-started":x(!0),j("recording","Recording started. Observing page interactions...");break;case"recording-observation":t.data.payload&&j("observation",t.data.payload.observation||t.data.payload.text);break;case"recording-stopped":case"qa-report":x(!1),j("system","Recording stopped.");break;case"recording-error":(null==(o=t.data.payload)?void 0:o.error)&&j("error","Recording error: ".concat(t.data.payload.error)),x(!1)}}};return window.addEventListener("message",t),()=>window.removeEventListener("message",t)},[j,C]);let k=(0,n.useCallback)(e=>{C(),c(e),_("loading"),f([]),g(!1),x(!1),j("system","Loading ".concat(e,"..."))},[j,C]),L=(0,n.useCallback)(()=>{k("".concat(window.location.origin,"/embed"))},[k]),R=(0,n.useCallback)(()=>{console.log("[Playground] Iframe loaded, waiting for ready message"),_("waiting"),t.current=setTimeout(()=>{_("not-installed"),j("system","ForgeInspector not detected. Make sure forge-inspector is installed in the target app.")},5e3)},[j]),F=(0,n.useCallback)((t,a)=>{var r;(null==(r=e.current)?void 0:r.contentWindow)&&e.current.contentWindow.postMessage({source:P,version:1,type:t,payload:a},"*")},[]),W=(0,n.useCallback)(()=>{let e=!h;g(e),F(e?"start-selection":"stop-selection"),e&&j("system","Selection mode active. Click an element in the preview to inspect it.")},[h,F,j]),A=(0,n.useCallback)(()=>{m?(E(),x(!1)):(x(!0),f([]),E(),j("recording","Recording started. Observing page interactions..."),["Page loaded, analyzing initial state...","Detected interactive form with 3 input fields","Button states component shows 5 variants","Data table has 3 rows with sortable columns"].forEach((e,t)=>{let r=setTimeout(()=>{j("observation",e)},(t+1)*2e3);a.current.push(r)}))},[m,j,E]),H=(0,n.useCallback)(e=>{navigator.clipboard.writeText(e),j("system","Copied to clipboard!")},[j]),O=(0,n.useCallback)(e=>{if(null==e?void 0:e.fileName){let t="vscode://file/".concat(e.fileName,":").concat(e.lineNumber,":").concat(e.columnNumber||0);window.open(t,"_blank")}},[]),B=(0,n.useCallback)(()=>{v(!1)},[]);return(0,n.useEffect)(()=>(s.current=!0,()=>{s.current=!1,C(),E()}),[C,E]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p,{webGpuAvailable:i}),(0,r.jsx)("main",{className:u().main,children:(0,r.jsxs)("div",{className:u().mainContent,children:[(0,r.jsx)("h1",{className:"".concat(u().pageTitle," animate-emerge"),children:"Playground"}),(0,r.jsx)("p",{className:"".concat(u().pageSubtitle," animate-emerge delay-1"),children:"Load a project with forge-inspector installed to test element picking and recording."}),(0,r.jsx)(D,{onLoad:k,isLoading:"loading"===d}),!o&&(0,r.jsx)("div",{className:"".concat(S().urlInput," animate-emerge delay-2"),children:(0,r.jsx)("button",{className:S().urlInputButton,onClick:L,style:{width:"100%"},children:"Test with Sample Components"})}),(0,r.jsx)("div",{className:S().externalLayout,children:(0,r.jsx)("div",{className:S().externalMain,children:(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)(I,{ref:e,url:o,onLoad:R}),(0,r.jsx)(T,{state:d})]})})})]})}),(0,r.jsx)(N,{onError:e=>console.error("[ChatDrawer Error]",e),children:(0,r.jsx)(w,{messages:y,isOpen:b,isSelecting:h,isRecording:m,webGpuAvailable:i,onToggleSelection:W,onToggleRecording:A,onClose:B,onCopyMessage:H,onOpenEditor:O})}),(0,r.jsx)(M,{isRecording:m})]})}}},e=>{e.O(0,[55,134,576,140,251,358],()=>e(e.s=8566)),_N_E=e.O()}]);